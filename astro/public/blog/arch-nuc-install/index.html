<!DOCTYPE html>
<html lang="en">
<head>
  
  
  
  
  <link rel="stylesheet" href="/littlefoot_12488593780039224145.min.54699eaea8856da92132545b99c00faedb4366ab9b50eb1b1e6856689a884ae1.css" integrity="sha256-VGmerqiFbakhMlRbmcAPrttDZqubUOsbHmhWaJqISuE=" />
  

  <title>Installing Arch Linux on my Intel NUC | utf9k</title>
<link rel="alternate" type="text/markdown" href="https://utf9k.net/blog/arch-nuc-install/index.md">
<link rel="alternate" type="text/plain" href="https://utf9k.net/blog/arch-nuc-install/index.txt">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="theme-color" content="#eaebe3" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#1f2738" media="(prefers-color-scheme: dark)" />
<meta name="author" content="Marcus Crane" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

<meta name="description"
  content="My self help guide to installing Arch" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon.png" sizes="16x16">
<link rel="canonical" href="https://utf9k.net/blog/arch-nuc-install/" />
<link rel="apple-touch-icon" href="/favicon.png">
<link rel="me" href="mailto:hello@utf9k.net" />
<link rel="me" href="https://mastodon.nz/@utf9k" />
<link rel="me" href="https://twitter.com/sentreh" />
<link rel="me" href="https://github.com/marcus-crane" />
<link rel="webmention" href="https://webmention.io/utf9k.net/webmention" />
<link rel="pingback" href="https://webmention.io/utf9k.net/xmlrpc" />
<meta property="og:title" content="Installing Arch Linux on my Intel NUC" />
<meta property="og:description" content="My self help guide to installing Arch" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://utf9k.net/blog/arch-nuc-install/" /><meta property="og:image" content="https://utf9k.net/favicon.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2017-12-24T00:00:00+13:00" />
<meta property="article:modified_time" content="2022-12-05T22:55:58+13:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://utf9k.net/favicon.png"/>

<meta name="twitter:title" content="Installing Arch Linux on my Intel NUC"/>
<meta name="twitter:description" content="My self help guide to installing Arch"/>
<meta name="twitter:site" content="@sentreh"/>






<link rel="stylesheet" href="/css/style.min.f927dcb0e4d3990cada1be73573ac4f5fa673a75c7e0fc28d4a7ee01400aeaaf.css" integrity="sha256-+SfcsOTTmQytob5zVzrE9fpnOnXH4Pwo1KfuAUAK6q8=" />

  

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Installing Arch Linux on my Intel NUC",
  "datePublished": "2017-12-24T00:00:00-00:00"
}
</script>


</head>
<body>
  
    <header class="navigation">
  <a href="/" id="logo">
    <img src="/favicon.png" alt="utf9k" width="16px" height="16px">
    <span>utf9k</span>
  </a>
  <nav>
    
    
    <li><a href="/blog/">Blog</a></li>
    <span>//</span>
    
    <li><a href="/projects/">Projects</a></li>
    <span>//</span>
    
    <li><a href="/about/">About</a></li>
    <span>//</span>
    
    <li><a href="/questions/">Questions</a></li>
    <span>//</span>
    
    <li><a href="/rss.xml">RSS</a></li>
    
    
  </nav>
</header>
    <div id="content">
    
<article>
  <header>
    <h1>Installing Arch Linux on my Intel NUC</h1>
    <div id="post-meta">
      <time datetime="2017-12-24 00:00:00 &#43;1300 NZDT">December 24, 2017</time>  · Around 10 minutes
    </div>
  </header>
  <div id="post-body">
    

<details class="my-5">
  <summary>Table of contents</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#getting-online">Getting online</a></li>
    <li><a href="#setting-up-your-hard-drive">Setting up your hard drive</a></li>
    <li><a href="#partitioning">Partitioning</a></li>
    <li><a href="#making-file-systems">Making file systems</a></li>
    <li><a href="#mounting-our-new-file-systems">Mounting our new file systems</a></li>
    <li><a href="#installing-base-packages">Installing base packages</a></li>
    <li><a href="#set-up-bash">Set up bash</a></li>
    <li><a href="#updates-and-other-dependencies-optional">Updates and other dependencies (optional)</a></li>
    <li><a href="#generating-locale">Generating locale</a></li>
    <li><a href="#timezone">Timezone</a></li>
    <li><a href="#setting-hardware-clock">Setting hardware clock</a></li>
    <li><a href="#hostname-setup">Hostname setup</a></li>
    <li><a href="#set-a-root-password">Set a root password</a></li>
    <li><a href="#installing-a-boot-manager">Installing a boot manager</a></li>
    <li><a href="#configuring-the-boot-manager">Configuring the boot manager</a></li>
  </ul>
</nav>
</details>


    <div class="notice">
  <hr class="hidden" />
  <h3>
  ⚰️ Is this up to date?</h3>
<p>While I used to fiddle with Arch, and other Linux distros when I was younger, I don&rsquo;t run it as my daily driver nowadays.</p>
<p>If I were to reinstall Arch Linux tomorrow, I would still dogfood my own guide and expect that it should be fairly seemless.</p>
<p>While I don&rsquo;t expect much has changed, you should know that I&rsquo;m not actively verifying that these steps haven&rsquo;t changed or anything like that.</p>
  <hr class="hidden" />
</div>
<p>It&rsquo;s that time again where I decide to reinstall Arch Linux and likely end up bashing my head against a wall. I have an old blog post on my Github but it could be better so this is an extended version mainly for my own future reference.</p>
<p>Please note that this isn&rsquo;t some guide for pros or that I expect to have the most 100% correct or efficient method of installing. It&rsquo;s just what I know works for me.</p>
<h2 id="getting-online">
  <a class="jumplink" href="#getting-online" aria-hidden="true">¶</a>
  Getting online
</h2><p>As I&rsquo;m installing on an Intel NUC, I&rsquo;m going to assume you might like it run it mainly via WiFi so we&rsquo;ll start by getting online. You can do this graphically by running <code>wifi-menu</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wifi-menu
</span></span></code></pre></div><p>Once you&rsquo;ve set up a profile, you&rsquo;ll see a new entry when using the <code>ifconfig</code> command and you can confirm you&rsquo;re online with <code>ping archlinux.org -c 3</code>.</p>
<h2 id="setting-up-your-hard-drive">
  <a class="jumplink" href="#setting-up-your-hard-drive" aria-hidden="true">¶</a>
  Setting up your hard drive
</h2><p>Personally, I wouldn&rsquo;t, and probably couldn&rsquo;t (yet) install Arch Linux as a dual boot partition. That is, alongside another operating system such as Windows or macOS. You might like to and that&rsquo;s great but this isn&rsquo;t the guide for you :)</p>
<p>First, we need to see what our current devices are:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>fdisk -l
</span></span></code></pre></div><p>You may see a few. In my case, my hard drive has a few <code>/dev/sda&lt;number&gt;</code> entries and my USB has 2 <code>/dev/sdb&lt;number&gt;</code> entries. For the purposes of this guide, I&rsquo;ll be assuming that your hard drive is under <code>/dev/sda</code> but when installing to, say, a Macbook, I&rsquo;ve found that the hard drive can be under <code>/dev/sdb</code>.</p>
<p>My hard drive will end up looking as follows once I&rsquo;ve set it up:</p>
<table>
<thead>
<tr>
<th>SIZE</th>
<th>PURPOSE</th>
<th>LOCATION</th>
</tr>
</thead>
<tbody>
<tr>
<td>500M</td>
<td>Boot Sector</td>
<td>/boot</td>
</tr>
<tr>
<td>20G</td>
<td>System Root</td>
<td>/</td>
</tr>
<tr>
<td>8G</td>
<td>Swap Space</td>
<td>N/A</td>
</tr>
<tr>
<td>437G</td>
<td>Home Directory</td>
<td>/home</td>
</tr>
</tbody>
</table>
<p>I&rsquo;m targeting a <a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface">UEFI</a> BIOS so we&rsquo;ll be using <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table">GPT</a> for our partition table.</p>
<p>The following uses <a href="https://www.gnu.org/software/parted/manual/parted.html">gparted</a> which you may or may not be familiar with if you&rsquo;ve only use GUI installers before. Just follow along and I&rsquo;ll comment what each segment is roughly doing. From hereon in, URLs prefixed by a tilde (~) indicate resources where you can read further information if you&rsquo;re the curious sort.</p>
<div class="notice">
  <hr class="hidden" />
  <h3>
  <span>⚠️</span>Consider yourself warned</h3>
<p>The following <em>WILL</em> wipe your hard drive so ensure that this is what you&rsquo;d like to do and/or that you&rsquo;ve backed up everything from any currently installed OS</p>
  <hr class="hidden" />
</div>
<h2 id="partitioning">
  <a class="jumplink" href="#partitioning" aria-hidden="true">¶</a>
  Partitioning
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Launched parted, passing our hard drive as an argument</span>
</span></span><span style="display:flex;"><span>parted /dev/sda
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create a partition table using the GUID Partition Table (GPT) format.</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># This wipes your drive(!)</span>
</span></span><span style="display:flex;"><span>mklabel gpt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create a 499M boot sector that will live at /boot</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># ESP is short for EFI System Partition and are always formatted as FAT32</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># We start at 1MiB instead of 0 because MBR/GPT both use the first block</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># ~ https://unix.stackexchange.com/a/286325</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># We use 550MiB as Rod Smith reports possible bugs with ESPs below 512MiB</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># ~ http://www.rodsbooks.com/efi-bootloaders/principles.html</span>
</span></span><span style="display:flex;"><span>mkpart ESP fat32 1MiB 551MiB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Set the boot flag to ON on partition number 1</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># ~ https://www.gnu.org/software/parted/manual/html_node/set.html</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">set</span> <span style="color:#bd93f9">1</span> boot on
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create a 20G ext4 partition that will live at /</span>
</span></span><span style="display:flex;"><span>mkpart primary ext4 551MiB 20.5GiB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create an 8G swap partition</span>
</span></span><span style="display:flex;"><span>mkpart primary linux-swap 20.5GiB 28.5GiB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Allocate the remaining space which will be used by users at /home/{user}</span>
</span></span><span style="display:flex;"><span>mkpart primary 28.5GiB 100%
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># All done!</span>
</span></span><span style="display:flex;"><span>quit
</span></span></code></pre></div><p>Now that are partitions are set up, running <code>fdisk -l</code> again should show the following:</p>
<table>
<thead>
<tr>
<th>DEVICE</th>
<th>FORMAT</th>
<th>LOCATION</th>
</tr>
</thead>
<tbody>
<tr>
<td>/dev/sda1</td>
<td>ESP</td>
<td>/boot</td>
</tr>
<tr>
<td>/dev/sda2</td>
<td>ext4</td>
<td>/</td>
</tr>
<tr>
<td>/dev/sda4</td>
<td>ext4</td>
<td>/home</td>
</tr>
</tbody>
</table>
<h2 id="making-file-systems">
  <a class="jumplink" href="#making-file-systems" aria-hidden="true">¶</a>
  Making file systems
</h2><p>We don&rsquo;t need any utilites to create our file systems, we can just do &rsquo;em straight outta the box like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Create a 32bit VFAT filesystem for our boot partition</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># VFAT is essentially FAT32 with support for longer filenames. See below for more details.</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># ~ http://wiki.linuxquestions.org/wiki/VFAT</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># ~ https://unix.stackexchange.com/a/263731</span>
</span></span><span style="display:flex;"><span>mkfs.vfat -F32 /dev/sda1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create an ext4 filesystem for our root partition</span>
</span></span><span style="display:flex;"><span>mkfs.ext4 /dev/sda2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Prepare a swap area</span>
</span></span><span style="display:flex;"><span>mkswap /dev/sda3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Activate our created swap area</span>
</span></span><span style="display:flex;"><span>swapon /dev/sda3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create an ext4 filesystem for our home partition</span>
</span></span><span style="display:flex;"><span>mkfs.ext4 /dev/sda4
</span></span></code></pre></div><p>Now that our hard drive is completely set up, we&rsquo;re ready to mount our file systems.</p>
<h2 id="mounting-our-new-file-systems">
  <a class="jumplink" href="#mounting-our-new-file-systems" aria-hidden="true">¶</a>
  Mounting our new file systems
</h2><p>Just as a reminder, here&rsquo;s where we want our partitions to end up</p>
<table>
<thead>
<tr>
<th>DEVICE</th>
<th>FORMAT</th>
<th>LOCATION</th>
</tr>
</thead>
<tbody>
<tr>
<td>/dev/sda1</td>
<td>ESP</td>
<td>/boot</td>
</tr>
<tr>
<td>/dev/sda2</td>
<td>ext4</td>
<td>/</td>
</tr>
<tr>
<td>/dev/sda4</td>
<td>ext4</td>
<td>/home</td>
</tr>
</tbody>
</table>
<p>Here&rsquo;s how this layout translates into mount commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Mount our root partition to /mnt</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># NOTE: /mnt doesn&#39;t persist once we&#39;re in our bash prompt</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># For example, /mnt/home becomes just /home</span>
</span></span><span style="display:flex;"><span>mount /dev/sda2 /mnt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create a folder which our ESP partition will be mounted to</span>
</span></span><span style="display:flex;"><span>mkdir /mnt/boot
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Mount our ESP partition to /boot</span>
</span></span><span style="display:flex;"><span>mount /dev/sda1 /mnt/boot
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create a home folder where all of our user directories will live</span>
</span></span><span style="display:flex;"><span>mkdir /mnt/home
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Mount the home partition to /home</span>
</span></span><span style="display:flex;"><span>mount /dev/sda4 /mnt/home
</span></span></code></pre></div><p>Nice! We&rsquo;re completely done and can start to actually install and configure Arch Linux.</p>
<h2 id="installing-base-packages">
  <a class="jumplink" href="#installing-base-packages" aria-hidden="true">¶</a>
  Installing base packages
</h2><p>Now we need to download and install the base packages for Arch Linux to our <code>/mnt</code> which will becomes our root (<code>/</code>) later on.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pacstrap /mnt base
</span></span></code></pre></div><p>For the curious, the <code>base</code> group contains a number of default libraries and utilties you may have used such as <code>man</code>, <code>openssl</code>, <code>bash</code>, <code>iptables</code> and <code>gcc</code> to name a few.</p>
<p>You can view the <code>pacstrap</code> script itself <a href="https://git.archlinux.org/arch-install-scripts.git/tree/pacstrap.in">here</a>. I thought it would be quite longer!</p>
<p>The script also runs the <code>mkinitcpio</code> bash script which you can learn more about <a href="https://wiki.archlinux.org/index.php/mkinitcpio#Overview">here</a>.</p>
<p>This entire process may take a few minutes so feel free to read ahead while you wait.</p>
<h2 id="set-up-bash">
  <a class="jumplink" href="#set-up-bash" aria-hidden="true">¶</a>
  Set up bash
</h2><p>With Arch Linux installed, we can finally move off of our live USB and start a bash process to set up our freshly initialised system after 2 more quick steps</p>
<p>Step 1 is generating a <a href="http://www.linfo.org/etc_fstab.html">file systems table</a>, referred to as <code>fstab</code> going forward. This is done so that all devices (/dev/sdaX) specificied in the file are mounted automatically on startup.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span></code></pre></div><p>The <code>-U</code> flag denotes that we want to identify our devices using <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a>, instead of labels, as noted <a href="https://github.com/falconindy/arch-install-scripts/blob/master/genfstab.in#L86">here</a>.</p>
<p>Step 2 is even quicker!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>arch-chroot /mnt
</span></span></code></pre></div><p><code>arch-chroot</code>, seen <a href="https://github.com/falconindy/arch-install-scripts/blob/master/arch-chroot.in">here</a> changes the root directory to, well, <code>/</code> which is our new root directory. As we&rsquo;re still on the live USB, we specify it as <code>/mnt</code> instead.</p>
<p><code>arch-chroot</code> is also able to take some flags following the root partition such as <code>arch-chroot /mnt /bin/bash</code>. It&rsquo;s worth noting that the preceeding example is actually fairly pointless seeing as <code>arch-chroot</code> already defaults to <code>bash</code> anyway.</p>
<p>Huzzah! We&rsquo;re finally in our new system but will it boot? Not quite yet and we&rsquo;ve still a lot to set up so let&rsquo;s carry on.</p>
<h2 id="updates-and-other-dependencies-optional">
  <a class="jumplink" href="#updates-and-other-dependencies-optional" aria-hidden="true">¶</a>
  Updates and other dependencies (optional)
</h2><p>At this point, I like to run a system upgrade using <code>pacman -Syu</code> just in case. As we&rsquo;ve just pulled our dependencies minutes ago, it&rsquo;ll likely find nothing but I reckon it feels good, haha.</p>
<p>I also need some extra bits and pieces for later at this point. We couldn&rsquo;t have fetched these earlier as trying to run <code>pacman</code>, the Arch Linux package manager, from the live USB would attempt to install to the USB itself and error out.</p>
<p>I need the following bits:</p>
<table>
<thead>
<tr>
<th>PACKAGE</th>
<th>PURPOSE</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://invisible-island.net/dialog/">dialog</a></td>
<td>A library for console-based UIs like <code>wifi-menu</code></td>
</tr>
<tr>
<td><a href="https://downloadcenter.intel.com/search?keyword=microcode+data">intel-ucode</a></td>
<td>Micro-code updates for Intel CPUs</td>
</tr>
<tr>
<td><a href="https://w1.fi/wpa_supplicant/">wpa_supplicant</a></td>
<td>Used to connect to wireless networks (put simply)</td>
</tr>
</tbody>
</table>
<p>That should be everything for now. The other bits (<code>netctl</code> and <code>dhcpcd</code>) were already installed as part of the <code>base</code> group from earlier. If you&rsquo;re using Ethernet, you can basically skip this entire step hence why it&rsquo;s marked as optional.</p>
<p>Honestly, we don&rsquo;t really need <code>dialog</code> as we could just use <code>netctl</code> directly but I find it more user friendly and I&rsquo;m not a masochist, haha.</p>
<p>You might as well also enable <code>dhcpcd</code> if you need it for ethernet with <code>systemctl enable dhcpcd</code>.</p>
<h2 id="generating-locale">
  <a class="jumplink" href="#generating-locale" aria-hidden="true">¶</a>
  Generating locale
</h2><p>Popular software often ships in a number of languages but in order to show the correct language, currency and so on, it needs to know where you live. We achieve this by generating and setting a locale.</p>
<p>To do so, edit <code>/etc/locale.gen</code> and uncomment your respective locale. In short, the format is <code>{language}_{country code}.{character encoding}</code>. As an example, I&rsquo;m in New Zealand so I uncomment the line <code>en_NZ.UTF-8 UTF-8</code>. If in doubt, just opt for <code>utf-8</code>.</p>
<p>I just use <code>nano</code> but if you prefer, this would be an alright time to run <code>pacman -S vim</code>.</p>
<p>Once you&rsquo;ve done that, you&rsquo;ll need to generate the locale files and export your language to your environment</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>locale-gen
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">LANG</span><span style="color:#ff79c6">={</span>xx<span style="color:#ff79c6">}</span>_<span style="color:#ff79c6">{</span>yy<span style="color:#ff79c6">}</span>.UTF-8
</span></span></code></pre></div><p>If done successfully, <code>echo $LANG</code> will display your locale.</p>
<p>For reference, the actual <code>locale-gen</code> script can be seen <a href="https://sourceware.org/git/?p=glibc.git;a=blob;f=localedata/gen-locale.sh;h=39f1475cbc45faaae32728dbfd7cce282c3cdb05;hb=HEAD">here</a> as part of <a href="https://sourceware.org/git/?p=glibc.git;a=summary">glibc</a>, the GNU implementation of the C standard library. I always wondered where it was from!</p>
<h2 id="timezone">
  <a class="jumplink" href="#timezone" aria-hidden="true">¶</a>
  Timezone
</h2><p>Selecting our timezone is fairly straightforward thanks to an interactive program called <code>tzselect</code>. Running it will show a list of continents and oceans. Selecting one will drill down to display countries.</p>
<p>Once you&rsquo;ve confirmed the output, it will mention appending the timezone to a file. Instead, we want to symlink that timezone to a file. In my case, the timezone is <code>Pacific/Auckland</code> but of course, you&rsquo;ll want to input your respective timezone instead.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ln -s /usr/share/zoneinfo/Pacific/Auckland /etc/localtime
</span></span></code></pre></div><h2 id="setting-hardware-clock">
  <a class="jumplink" href="#setting-hardware-clock" aria-hidden="true">¶</a>
  Setting hardware clock
</h2><p>The last of our locale related setups is configuring the system clock. To do that, we&rsquo;ll tell our hardware clock to set the system time using the <code>--hctosys</code> option. You can read more about <code>hwclock</code> and how it differs from system time <a href="https://linux.die.net/man/8/hwclock">here</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hwclock --systohc
</span></span></code></pre></div><h2 id="hostname-setup">
  <a class="jumplink" href="#hostname-setup" aria-hidden="true">¶</a>
  Hostname setup
</h2><p>We like life to be simple (but no simpler) and giving our computer/server a unique name is an important part of that process. For this bit, let&rsquo;s assume we want to name our system <code>weinerdog</code> because it sounds silly.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> weinerdog &gt; /etc/hostname
</span></span></code></pre></div><p>Oh, that was easy. We also need to tell our system that <code>weinerdog</code> is an alias for <code>127.0.0.1</code>, just like <code>localhost</code> is. We could fire up our favourite editor but it&rsquo;s likely <code>/etc/hosts</code> is empty so just do the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> 127.0.0.1 localhost weinerdog &gt; /etc/hosts
</span></span></code></pre></div><p>How quick was that, huh?</p>
<h2 id="set-a-root-password">
  <a class="jumplink" href="#set-a-root-password" aria-hidden="true">¶</a>
  Set a root password
</h2><p>We&rsquo;ll be using this password to login, which I sometimes forget. It should be different than the password for the user account we&rsquo;ll be making soon but I&rsquo;d be lying if I said I have a super secure password. You have bigger problems if you think this writeup will give you top notch security anyway. I&rsquo;m just here for a usable system!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd
</span></span></code></pre></div><p>Just type in your password twice. Not much more to it than that.</p>
<h2 id="installing-a-boot-manager">
  <a class="jumplink" href="#installing-a-boot-manager" aria-hidden="true">¶</a>
  Installing a boot manager
</h2><p>We&rsquo;ll be using <code>systemd-boot</code> as our EFI boot manager. I couldn&rsquo;t tell you anything about it other than it works and that&rsquo;s good enough.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bootctl --path<span style="color:#ff79c6">=</span>/boot install
</span></span></code></pre></div><p>The above command copies the <code>systemd-boot</code> binary to our EFI System Partition (<code>/boot</code>) and adds it as the default EFI application to be loaded as stated <a href="https://wiki.archlinux.org/index.php/systemd-boot#EFI_boot">here</a>.</p>
<h2 id="configuring-the-boot-manager">
  <a class="jumplink" href="#configuring-the-boot-manager" aria-hidden="true">¶</a>
  Configuring the boot manager
</h2><p>Now that we have a boot manager, we need to tell it what to boot exactly. We&rsquo;ll create a new <code>arch.conf</code> entry using <code>nano</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nano /boot/loader/entries/arch.conf
</span></span></code></pre></div><p>and enter the following</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>title Arch Linux
</span></span><span style="display:flex;"><span>linux /vmlinuz-linux
</span></span><span style="display:flex;"><span>initrd /intel-ucode.img
</span></span><span style="display:flex;"><span>initrd /initramfs-linux.img
</span></span><span style="display:flex;"><span>options <span style="color:#8be9fd;font-style:italic">root</span><span style="color:#ff79c6">=</span>/dev/sda2 rw <span style="color:#8be9fd;font-style:italic">elevator</span><span style="color:#ff79c6">=</span>deadline quiet splash <span style="color:#8be9fd;font-style:italic">resume</span><span style="color:#ff79c6">=</span>/dev/sda3 <span style="color:#8be9fd;font-style:italic">nmi_watchdog</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">0</span>
</span></span></code></pre></div><p><strong>NOTE</strong>: The line <code>initrd /intel-ucode.img</code> <strong>ONLY</strong> applies if you installed the <code>intel-ucode</code> package from earlier which anyone with an Intel CPU should do.</p>
<p>As for the options, I couldn&rsquo;t say if you need, or don&rsquo;t need, any of them but it&rsquo;s worked fine for me so far. I&rsquo;ll probably read up on them in depth shortly and update this post as required.</p>
<p>Once that&rsquo;s created, set it as the default configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;default arch&#34;</span> &gt; /boot/loader/loader.conf
</span></span></code></pre></div><p>and now you&rsquo;re ready to reboot into a nicely working system!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span>reboot
</span></span></code></pre></div><p>I&rsquo;ve still got a lot to learn about Arch Linux but so far, the above setup has worked well for me.</p>
<p>There&rsquo;s still more that goes into a system but this is enough to get past the pesky initial setup which gave me hours upon hours of grief as a beginner, which I still am essentially.</p>

  </div>
</article>

    </div>
    <div id="fullscreen"></div>
  
  
  
  
  
  
  <script defer type="text/javascript" src="/js/footnotes.1be9fd05e6f9672cdc2b4f8c9a16b96016b4941e68d5ebe04a863454f8f64122.js" integrity="sha256-G&#43;n9Beb5ZyzcK0&#43;Mmha5YBa0lB5o1evgSoY0VPj2QSI="></script>

  
  
  
  
  <script defer type="text/javascript" src="/js/image-viewer.90762074c5e8b05c4d401ecb428a34fb7215f4d42d42eb93eff0f6bda5416a6d.js" integrity="sha256-kHYgdMXosFxNQB7LQoo0&#43;3IV9NQtQuuT7/D2vaVBam0="></script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  
  
  
  
  <link rel="stylesheet" href="/littlefoot_12488593780039224145.min.54699eaea8856da92132545b99c00faedb4366ab9b50eb1b1e6856689a884ae1.css" integrity="sha256-VGmerqiFbakhMlRbmcAPrttDZqubUOsbHmhWaJqISuE=" />
  

  <title>Using Fastmail with CalDAV libraries | utf9k</title>
<link rel="alternate" type="text/markdown" href="https://utf9k.net/blog/fastmail-caldav/index.md">
<link rel="alternate" type="text/plain" href="https://utf9k.net/blog/fastmail-caldav/index.txt">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="theme-color" content="#eaebe3" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#1f2738" media="(prefers-color-scheme: dark)" />
<meta name="author" content="Marcus Crane" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

<meta name="description"
  content="A guide to using Fastmail with CalDAV libraries which are often fiddly and struggle to find your calendars" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon.png" sizes="16x16">
<link rel="canonical" href="https://utf9k.net/blog/fastmail-caldav/" />
<link rel="apple-touch-icon" href="/favicon.png">
<link rel="me" href="mailto:hello@utf9k.net" />
<link rel="me" href="https://mastodon.nz/@utf9k" />
<link rel="me" href="https://twitter.com/sentreh" />
<link rel="me" href="https://github.com/marcus-crane" />
<link rel="webmention" href="https://webmention.io/utf9k.net/webmention" />
<link rel="pingback" href="https://webmention.io/utf9k.net/xmlrpc" />
<meta property="og:title" content="Using Fastmail with CalDAV libraries" />
<meta property="og:description" content="A guide to using Fastmail with CalDAV libraries which are often fiddly and struggle to find your calendars" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://utf9k.net/blog/fastmail-caldav/" /><meta property="og:image" content="https://utf9k.net/favicon.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2022-05-28T20:20:00+13:00" />
<meta property="article:modified_time" content="2023-04-16T21:59:14+12:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://utf9k.net/favicon.png"/>

<meta name="twitter:title" content="Using Fastmail with CalDAV libraries"/>
<meta name="twitter:description" content="A guide to using Fastmail with CalDAV libraries which are often fiddly and struggle to find your calendars"/>
<meta name="twitter:site" content="@sentreh"/>






<link rel="stylesheet" href="/css/style.min.f927dcb0e4d3990cada1be73573ac4f5fa673a75c7e0fc28d4a7ee01400aeaaf.css" integrity="sha256-+SfcsOTTmQytob5zVzrE9fpnOnXH4Pwo1KfuAUAK6q8=" />

  

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Using Fastmail with CalDAV libraries",
  "datePublished": "2022-05-28T20:20:00-00:00"
}
</script>


</head>
<body>
  
    <header class="navigation">
  <a href="/" id="logo">
    <img src="/favicon.png" alt="utf9k" width="16px" height="16px">
    <span>utf9k</span>
  </a>
  <nav>
    
    
    <li><a href="/blog/">Blog</a></li>
    <span>//</span>
    
    <li><a href="/projects/">Projects</a></li>
    <span>//</span>
    
    <li><a href="/about/">About</a></li>
    <span>//</span>
    
    <li><a href="/questions/">Questions</a></li>
    <span>//</span>
    
    <li><a href="/rss.xml">RSS</a></li>
    
    
  </nav>
</header>
    <div id="content">
    
<article>
  <header>
    <h1>Using Fastmail with CalDAV libraries</h1>
    <div id="post-meta">
      <time datetime="2022-05-28 20:20:00 &#43;1300 &#43;1300">May 28, 2022</time>  · Around 3 minutes
    </div>
  </header>
  <div id="post-body">
    


    <p>I&rsquo;ve been a subscriber to <a href="https://fastmail.com">Fastmail</a> now for probably a good five years at least, if not more at this point.</p>
<p>It&rsquo;s a really nice service, not just for email but also email and contact hosting and for most clients, it all basically works out of the box as you might hope.</p>
<p>A number of services that integration with calendars tend to only offer <a href="https://en.wikipedia.org/wiki/Google_Calendar">Google Calendar</a> integration but thankfully CalDAV integration pops up from time to time.</p>
<p>One thing that I think can be a little bit confusing for people is the Fastmail documentation.</p>
<p>If we visit the <a href="https://www.fastmail.help/hc/en-us/articles/1500000278342-Server-names-and-ports#calendar">Server names and ports</a> page, it mentions <code>https://caldav.fastmail.com/</code> as the default server for clients with auto-discovery with <a href="https://www.fastmail.help/hc/en-us/articles/360058752834">a support page</a> for other clients.</p>
<p>That&rsquo;s perfectly correct but a number of CalDAV libraries I&rsquo;ve seen around the place tend to complain about that base URL.</p>
<p>Most recently, I ran into this with <a href="https://github.com/davish/obsidian-full-calendar/issues/87">obsidian-full-calendar</a> where Fastmail integration was considered not working but really, the wrong server name was being used.</p>
<p>If <code>https://caldav.fastmail.com/</code> doesn&rsquo;t work, odds are you&rsquo;ll get what you&rsquo;re after by using the following server name:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>https://caldav.fastmail.com/dav/principals/user/user@example.com/
</span></span></code></pre></div><p><em><strong><a href="mailto:user@example.com">user@example.com</a></strong> is the email address that you use for Fastmail.</em></p>
<p>You can confirm that by navigating to your Fastmail inbox and seeing what address in the top left corner if you really need to.</p>
<p>Alternatively, you could also navigate to <code>Settings</code> → <code>Calendars</code> → <code>Export</code> (on one of the calendars) and copy most of the section from <code>CalDAV URL</code>.</p>
<center>
  <figure>
    <img src="calendar-settings.png" alt="A screenshot of the author&amp;rsquo;s Fastmail account, showing the Settings page. The Calendars tab is highlighted in the left sidebar. Three calendars are visible in the background with a modal open in the foreground. The modal has two sections: One deals with exporting a calendar. The other has a text box with the CalDAV URL for the selected calendar. An arrow is pointing to the text box. The contents of the textbox is highlighted up to the end of the segment containing the author&amp;rsquo;s email. The ID at the end is not selected although this is not visible as it is blurred out."  loading="lazy" />
  </figure>
</center><p>Putting the whole URL will only load one calendar but odds are, whatever CalDAV client you&rsquo;re struggling with will load all of your calendars by removing the calendar ID at the end.</p>
<p>Why does this work exactly? Well, I&rsquo;m no expert here but I gave a brief overview of my understanding by way of <a href="https://github.com/davish/obsidian-full-calendar/pull/106#issuecomment-1120536933">this Github comment</a>.</p>
<p>For completeness, I&rsquo;ve quoted it verbatim:</p>
<blockquote>
<p>For anyone interested, Fastmail uses <a href="https://www.cyrusimap.org/">Cyrus IMAP</a> which is an all-in-one IMAP, CalDAV and CardDAV server. As I understand it, it <a href="https://www.cyrusimap.org/imap/concepts/features/dav-collection-mgmt.html">represents calendars as mailboxes under the hood</a> hence why you use your Fastmail address as the identifier. That is, you have a single &ldquo;calendar&rdquo; in the UI but you can have multiple calendars on it eg; one for Events, one for Work and so on.</p>
<p>In fact, we can prove this by requesting a bogus calendar:</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -u &lt;fastmail-email&gt;:&lt;fastmail-app-password&gt; https://caldav.fastmail.com/dav/calendars/user/&lt;fastmail-email&gt;/blah
</span></span><span style="display:flex;"><span>&lt;!DOCTYPE HTML PUBLIC <span style="color:#f1fa8c">&#34;-//W3C//DTD HTML 4.01 Transitional//EN&#34;</span> <span style="color:#f1fa8c">&#34;http://www.w3.org/TR/html4/loose.dtd&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;html&gt;
</span></span><span style="display:flex;"><span>  &lt;head&gt;
</span></span><span style="display:flex;"><span>    &lt;title&gt;404 Not Found&lt;/title&gt;
</span></span><span style="display:flex;"><span>  &lt;/head&gt;
</span></span><span style="display:flex;"><span>  &lt;body&gt;
</span></span><span style="display:flex;"><span>    &lt;h1&gt;Not Found&lt;/h1&gt;
</span></span><span style="display:flex;"><span>    &lt;p&gt;Mailbox does not exist&lt;/p&gt;
</span></span><span style="display:flex;"><span>    &lt;hr&gt;
</span></span><span style="display:flex;"><span>    &lt;address&gt;Cyrus-HTTP/3.7.0-alpha0-591-gfe6c3a2700-fm-20220427.001-gfe6c3a27 Cyrus-SASL/2.1.27 Lib/XML2.9.10 Jansson/2.13.1 OpenSSL/1.1.1n Wslay/1.1.1 Zlib/1.2.11 Brotli/1.0.9 Xapian/1.5.0 LibiCal/3.0 ICU4C/69.1 SQLite/3.34.1 Server at caldav.fastmail.com Port 2075&lt;/address&gt;
</span></span><span style="display:flex;"><span>  &lt;/body&gt;
</span></span><span style="display:flex;"><span>&lt;/html&gt;
</span></span></code></pre></div><p><em>Note how it is looking for a mailbox despite being a caldav server</em></p>
<blockquote>
<p>So yeah, your calendars are just email inboxes under the hood with Fastmail!</p>
<p>More specifically, there is a mailbox per calendar (I think) and that mailbox is full of <a href="https://en.wikipedia.org/wiki/ICalendar">ics</a> files</p>
</blockquote>

  </div>
</article>

    </div>
    <div id="fullscreen"></div>
  
  
  
  
  
  
  <script defer type="text/javascript" src="/js/footnotes.1be9fd05e6f9672cdc2b4f8c9a16b96016b4941e68d5ebe04a863454f8f64122.js" integrity="sha256-G&#43;n9Beb5ZyzcK0&#43;Mmha5YBa0lB5o1evgSoY0VPj2QSI="></script>

  
  
  
  
  <script defer type="text/javascript" src="/js/image-viewer.90762074c5e8b05c4d401ecb428a34fb7215f4d42d42eb93eff0f6bda5416a6d.js" integrity="sha256-kHYgdMXosFxNQB7LQoo0&#43;3IV9NQtQuuT7/D2vaVBam0="></script>

</body>
</html>

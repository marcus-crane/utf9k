<!DOCTYPE html>
<html lang="en">
<head>
  
  
  
  
  <link rel="stylesheet" href="/littlefoot_12488593780039224145.min.54699eaea8856da92132545b99c00faedb4366ab9b50eb1b1e6856689a884ae1.css" integrity="sha256-VGmerqiFbakhMlRbmcAPrttDZqubUOsbHmhWaJqISuE=" />
  

  <title>Creating debug reports with Hugo inline shortcodes | utf9k</title>
<link rel="alternate" type="text/markdown" href="https://utf9k.net/blog/hugo-debug-reports/index.md">
<link rel="alternate" type="text/plain" href="https://utf9k.net/blog/hugo-debug-reports/index.txt">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="theme-color" content="#eaebe3" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#1f2738" media="(prefers-color-scheme: dark)" />
<meta name="author" content="Marcus Crane" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

<meta name="description"
  content="I teach you some tricks on introspecting your Hugo builds" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon.png" sizes="16x16">
<link rel="canonical" href="https://utf9k.net/blog/hugo-debug-reports/" />
<link rel="apple-touch-icon" href="/favicon.png">
<link rel="me" href="mailto:hello@utf9k.net" />
<link rel="me" href="https://mastodon.nz/@utf9k" />
<link rel="me" href="https://twitter.com/sentreh" />
<link rel="me" href="https://github.com/marcus-crane" />
<link rel="webmention" href="https://webmention.io/utf9k.net/webmention" />
<link rel="pingback" href="https://webmention.io/utf9k.net/xmlrpc" />
<meta property="og:title" content="Creating debug reports with Hugo inline shortcodes" />
<meta property="og:description" content="I teach you some tricks on introspecting your Hugo builds" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://utf9k.net/blog/hugo-debug-reports/" /><meta property="og:image" content="https://utf9k.net/favicon.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-07-12T18:50:00+13:00" />
<meta property="article:modified_time" content="2022-12-05T22:53:29+13:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://utf9k.net/favicon.png"/>

<meta name="twitter:title" content="Creating debug reports with Hugo inline shortcodes"/>
<meta name="twitter:description" content="I teach you some tricks on introspecting your Hugo builds"/>
<meta name="twitter:site" content="@sentreh"/>






<link rel="stylesheet" href="/css/style.min.f927dcb0e4d3990cada1be73573ac4f5fa673a75c7e0fc28d4a7ee01400aeaaf.css" integrity="sha256-+SfcsOTTmQytob5zVzrE9fpnOnXH4Pwo1KfuAUAK6q8=" />

  

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Creating debug reports with Hugo inline shortcodes",
  "datePublished": "2021-07-12T18:50:00-00:00"
}
</script>


</head>
<body>
  
    <header class="navigation">
  <a href="/" id="logo">
    <img src="/favicon.png" alt="utf9k" width="16px" height="16px">
    <span>utf9k</span>
  </a>
  <nav>
    
    
    <li><a href="/blog/">Blog</a></li>
    <span>//</span>
    
    <li><a href="/projects/">Projects</a></li>
    <span>//</span>
    
    <li><a href="/about/">About</a></li>
    <span>//</span>
    
    <li><a href="/questions/">Questions</a></li>
    <span>//</span>
    
    <li><a href="/rss.xml">RSS</a></li>
    
    
  </nav>
</header>
    <div id="content">
    
<article>
  <header>
    <h1>Creating debug reports with Hugo inline shortcodes</h1>
    <div id="post-meta">
      <time datetime="2021-07-12 18:50:00 &#43;1300 &#43;1300">July 12, 2021</time>  · Around 5 minutes
    </div>
  </header>
  <div id="post-body">
    


    <p>Recently I discovered that <a href="https://gohugo.io">Hugo</a> added support for <a href="https://gohugo.io/templates/shortcode-templates/">inline shortcodes</a> like 30 versions ago.</p>
<p>According to <a href="https://github.com/bep">bep</a>, the reason I had never heard about them was simple:</p>
<blockquote class="twitter-tweet" data-dnt="true"><p lang="en" dir="ltr">You didn&#39;t ask ... (we added that to get the <a href="https://twitter.com/getbootstrap?ref_src=twsrc%5Etfw">@getbootstrap</a> site on Hugo, they had lots of inline scripting) ...</p>&mdash; Bjørn Erik Pedersen (@bepsays) <a href="https://twitter.com/bepsays/status/1408348824083615745?ref_src=twsrc%5Etfw">June 25, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="a-shortcode-refresher">
  <a class="jumplink" href="#a-shortcode-refresher" aria-hidden="true">¶</a>
  A shortcode refresher
</h2><p>To give an idea of what this means, here&rsquo;s a reminder on how you were required to use shortcodes in the past:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- layouts/shortcodes/notice.html --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;notice&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#ff79c6">h3</span>&gt;{{ .Get &#34;title&#34; }}&lt;/<span style="color:#ff79c6">h3</span>&gt;
</span></span><span style="display:flex;"><span>  {{ .Inner }}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ff79c6">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- content/blog/example-post.md --&gt;</span>
</span></span><span style="display:flex;"><span># This is an example post
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ notice title=&#34;This is a notice&#34; }}
</span></span><span style="display:flex;"><span>This is the content inside of a notice shortcode
</span></span><span style="display:flex;"><span>{{ /notice }}
</span></span></code></pre></div><p><sup>Minor caveat with shortcode syntax<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></sup></p>
<p>As you can see, the shortcode internals live in your <code>layouts</code> folder, and have access to your <code>page</code> context as well as all of the various Hugo functions. Your post is only able to pass parameters into the shortcode itself.</p>
<p>Now to be clear, there&rsquo;s absolutely nothing wrong with doing this. In principle, it&rsquo;s a good idea for your content to not have any awareness of how it&rsquo;s being rendered. If you were to change the internals of the notice shortcode once, all of the pages it appears in are instantly updated upon the next render.</p>
<p>In saying that, the introduction of inline shortcodes allows us to do some fun things:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- content/blog/example-post.md --&gt;</span>
</span></span><span style="display:flex;"><span># This is an example post
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Check out some of these funny gags I wrote:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ readfile.inline }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">ul</span>&gt;
</span></span><span style="display:flex;"><span>{{ range $.Site.Data.gags }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">li</span>&gt;{{ . }}&lt;/<span style="color:#ff79c6">li</span>&gt;
</span></span><span style="display:flex;"><span>{{ end }}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ff79c6">ul</span>&gt;
</span></span><span style="display:flex;"><span>{{ /readfile.inline }}
</span></span></code></pre></div><p><sup>Minor caveat with shortcode syntax<sup id="fnref1:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></sup></p>
<p>Don&rsquo;t believe me? Here&rsquo;s that same inline shortcode embedded in this very post:</p>
<details>
  <summary>Check out these fun gag lines I wrote</summary>
  
<ul>
  
  <li>Has anyone seen my keys? I dropped them in here somewhere...</li>
  
  <li>My bluetooth is disabled but I only have bluetooth devices. How do I turn it back on?!</li>
  
  <li>Is good software a myth? Perhaps we'll never know</li>
  
  <li>The IETF announces BNS - Baby Name System</li>
  
  <li>If text is sublime already, how can there be a sublime text 2?</li>
  
  <li>Why is it called venture capital if you can just apply for it without walking anywhere?</li>
  
  <li>What does the Y in YCombinator stand for?</li>
  
  <li>The invention of sport was a mistake!</li>
  
  <li>Besides Tele, how many other types of vision are there?</li>
  
  <li>When are they going to air Who Wants To Be A Crypto Millionaire?</li>
  
  <li>What if NASA was the result of a typo in a government memo proposing "Spice exploration"?</li>
  
  <li>What does the "work" in network refer to? There's no such thing as a netrelax after all</li>
  
  <li>You have 341 new emails.</li>
  
  <li>What even is a TPS report?</li>
  
  <li>Do you think anyone has ever been killed by a judge's gavel?</li>
  
  <li>I haven't used a mailbox in quite a long time!</li>
  
  <li>Thanks for reading this far! I guess you enjoyed the content, hmm?</li>
  
  <li>I don't have any good fuel fun facts. I don't even drive!</li>
  
  <li>Did you know solo camping is a thing? I should try it sometime.</li>
  
  <li>Budgeting is hard. You should try to save a little more for that rainy day!</li>
  
  <li>I only ever see baths in hotels. What if they end up becoming extinct?!</li>
  
  <li>An internet connected sandwich maker wouldn't be so bad, would it?</li>
  
  <li>Someone who is good at the economy please help me plan my startup runway</li>
  
  <li>:wq!</li>
  
  <li>Apparently you're supposed to feel rested after sleep but I haven't read the literature myself</li>
  
  </ul>
  
</details>
<p>If any of these look familiar, I just used an inline shortcode to read from the same file that powers the footer.</p>
<p>I haven&rsquo;t used inline shortcodes to their full potential yet but I&rsquo;d like to use it to add a bit more flavour to posts in future where having a dedicated shortcode would be a bit overkill.</p>
<p>They&rsquo;ll always have their place of course! Pick the right tool for the job and all that.</p>
<p>Anyway, that brings me to the actual topic at hand: debug reports.</p>
<h2 id="let-hugo-debug-itself-for-you">
  <a class="jumplink" href="#let-hugo-debug-itself-for-you" aria-hidden="true">¶</a>
  Let Hugo debug itself for you
</h2><p>There are always some unknowns to any site like &ldquo;Do any links throw a 404?&rdquo; or &ldquo;Are there posts without a description?&rdquo; and to shed some light on the current situation, we can get a bit meta.</p>
<p>It&rsquo;s easiest if you just check out the <a href="/debug">debug</a> section of my site for yourself but the short version is that I&rsquo;ve been using inline shortcodes to write one off custom reports, that effectively answer these questions through introspection. That&rsquo;s just a fancy way of saying I write Hugo content (reports) that show the status of other Hugo content.</p>
<p>There isn&rsquo;t anything super complex at the moment but I used it to clean up posts where the <a href="https://utf9k.net/debug/file-url-match/">folder names didn&rsquo;t match slugs</a> as an example.</p>
<p>They automatically update every time the site rebuilds so while I could keep a spreadsheet, this is a nice way of keeping that useful information close to where the action happens.</p>
<p>I made <a href="https://utf9k.net/debug/reports-todo/">a list of various reports</a> that I&rsquo;ll consider generating going forward and some will be a bit more tricky than others.</p>
<p>In all likelihood, the most interesting ones will just be reading from data sources generated by external scripts running either locally or via a CI pipeline. It&rsquo;s nicer to see all this information on one place even if I could just read the logs from my terminal or a pipeline run.</p>
<p>Ah, and before I forget, the actual source for the reports <a href="https://github.com/marcus-crane/utf9k/tree/main/content/debug">is visible on Github</a> so feel free to borrow anything you&rsquo;d like to use for your own site. They&rsquo;re pretty naively written but they get the job done.</p>
<p>Hopefully I&rsquo;ve given you something to consider and if you think of any interesting report types that aren&rsquo;t on my list, <a href="mailto:hello@utf9k.net">I&rsquo;d love to hear about them!</a></p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>The above isn&rsquo;t actual syntax but near enough. If I were to type it properly, the shortcode would really render, whereas I&rsquo;m trying to demonstrate the shortcode internals themselves. To find some real shortcode syntax, check out <a href="https://gohugo.io/templates/shortcode-templates/">this</a> section of the Hugo docs.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a>&#160;<a href="#fnref1:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  </div>
</article>

    </div>
    <div id="fullscreen"></div>
  
  
  
  
  
  
  <script defer type="text/javascript" src="/js/footnotes.1be9fd05e6f9672cdc2b4f8c9a16b96016b4941e68d5ebe04a863454f8f64122.js" integrity="sha256-G&#43;n9Beb5ZyzcK0&#43;Mmha5YBa0lB5o1evgSoY0VPj2QSI="></script>

  
  
  
  
  <script defer type="text/javascript" src="/js/image-viewer.90762074c5e8b05c4d401ecb428a34fb7215f4d42d42eb93eff0f6bda5416a6d.js" integrity="sha256-kHYgdMXosFxNQB7LQoo0&#43;3IV9NQtQuuT7/D2vaVBam0="></script>

</body>
</html>

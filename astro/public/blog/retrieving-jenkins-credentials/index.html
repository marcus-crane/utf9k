<!DOCTYPE html>
<html lang="en">
<head>
  
  
  
  
  <link rel="stylesheet" href="/littlefoot_12488593780039224145.min.54699eaea8856da92132545b99c00faedb4366ab9b50eb1b1e6856689a884ae1.css" integrity="sha256-VGmerqiFbakhMlRbmcAPrttDZqubUOsbHmhWaJqISuE=" />
  

  <title>Retrieving credentials from Jenkins | utf9k</title>
<link rel="alternate" type="text/markdown" href="https://utf9k.net/blog/retrieving-jenkins-credentials/index.md">
<link rel="alternate" type="text/plain" href="https://utf9k.net/blog/retrieving-jenkins-credentials/index.txt">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="theme-color" content="#eaebe3" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#1f2738" media="(prefers-color-scheme: dark)" />
<meta name="author" content="Marcus Crane" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

<meta name="description"
  content="If you&#39;ve put your secrets in Jenkins, there is a sneaky backdoor to get them out again" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon.png" sizes="16x16">
<link rel="canonical" href="https://utf9k.net/blog/retrieving-jenkins-credentials/" />
<link rel="apple-touch-icon" href="/favicon.png">
<link rel="me" href="mailto:hello@utf9k.net" />
<link rel="me" href="https://mastodon.nz/@utf9k" />
<link rel="me" href="https://twitter.com/sentreh" />
<link rel="me" href="https://github.com/marcus-crane" />
<link rel="webmention" href="https://webmention.io/utf9k.net/webmention" />
<link rel="pingback" href="https://webmention.io/utf9k.net/xmlrpc" />
<meta property="og:title" content="Retrieving credentials from Jenkins" />
<meta property="og:description" content="If you&#39;ve put your secrets in Jenkins, there is a sneaky backdoor to get them out again" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://utf9k.net/blog/retrieving-jenkins-credentials/" /><meta property="og:image" content="https://utf9k.net/favicon.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2019-07-29T00:00:00+13:00" />
<meta property="article:modified_time" content="2023-04-16T21:59:14+12:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://utf9k.net/favicon.png"/>

<meta name="twitter:title" content="Retrieving credentials from Jenkins"/>
<meta name="twitter:description" content="If you&#39;ve put your secrets in Jenkins, there is a sneaky backdoor to get them out again"/>
<meta name="twitter:site" content="@sentreh"/>






<link rel="stylesheet" href="/css/style.min.f927dcb0e4d3990cada1be73573ac4f5fa673a75c7e0fc28d4a7ee01400aeaaf.css" integrity="sha256-+SfcsOTTmQytob5zVzrE9fpnOnXH4Pwo1KfuAUAK6q8=" />

  

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Retrieving credentials from Jenkins",
  "datePublished": "2019-07-29T00:00:00-00:00"
}
</script>


</head>
<body>
  
    <header class="navigation">
  <a href="/" id="logo">
    <img src="/favicon.png" alt="utf9k" width="16px" height="16px">
    <span>utf9k</span>
  </a>
  <nav>
    
    
    <li><a href="/blog/">Blog</a></li>
    <span>//</span>
    
    <li><a href="/projects/">Projects</a></li>
    <span>//</span>
    
    <li><a href="/about/">About</a></li>
    <span>//</span>
    
    <li><a href="/questions/">Questions</a></li>
    <span>//</span>
    
    <li><a href="/rss.xml">RSS</a></li>
    
    
  </nav>
</header>
    <div id="content">
    
<article>
  <header>
    <h1>Retrieving credentials from Jenkins</h1>
    <div id="post-meta">
      <time datetime="2019-07-29 00:00:00 &#43;1300 &#43;1300">July 29, 2019</time>  Â· Around 2 minutes
    </div>
  </header>
  <div id="post-body">
    


    <p>Have you ever stored a password in Jenkins, only to forget later on what the value is? You might try logging it from inside an existing job, but you&rsquo;ll find that Jenkins goes out of its way to mask that value from you (and any potential attackers!)</p>
<p>There&rsquo;s a sneaky way to get those credentials out of a Jenkins agent that requires only a little bit of wrangling. It may be possible to lock this down, I haven&rsquo;t looked, so it&rsquo;s good to be aware of it, in order to consider the security implications too.</p>
<p>Find the password you want to get your hands on</p>
<center>
  <figure>
    <img src="01-credential-view.png" alt="A screenshot of the Jenkins UI. It is showing the credentials section. It depicts a password entry called &amp;lsquo;My super secret password&amp;rsquo; although no actual credentials are visible."  loading="lazy" />
  </figure>
</center><p>Click <code>Update</code> which will show you an obscured version of the secret</p>
<center>
  <figure>
    <img src="02-credential-update.png" alt="A screenshot of the Jenkins UI progressed from the previous image. Metadata about the selected credential are visible such as scope, ID and description. There is a secret field but it just contains dots like any normal password field does, rather than the actual password text."  loading="lazy" />
  </figure>
</center><p>Right click on the <code>Secret</code> field and hit <code>Inspect Element</code> to bring up the developer tools for your browser</p>
<center>
  <figure>
    <img src="03-inspect-element.png" alt="A screenshot of the Jenkins UI. The user has right clicked on the secret field of the credential metadata. Their browser context menu is visible, invoked by right clicking. The &amp;lsquo;Inspect Element&amp;rsquo; item is highlighted but not yet clicked."  loading="lazy" />
  </figure>
</center><p>Either right click on the <code>value</code> part of the input field, or double click on the value area and copy the wonky looking hash. It&rsquo;ll be surrounded with braces eg; <code>{ABC123=}</code></p>
<center>
  <figure>
    <img src="04-credential-hash.png" alt="A screenshot of the Firefox browser tools. The user has found the DOM node for the redacted input in the element selector pane. They have right clicked it, bringing up the browser context menu and have highlighted &amp;lsquo;Copy attribute value&amp;rsquo; under the &amp;lsquo;Attributes&amp;rsquo; submenu."  loading="lazy" />
  </figure>
</center><p>With that value in your clipboard, go to <code>/script</code> eg; <code>https://jenkins.example.com/script</code> or from the homepage, visit <code>Manage Jenkins -&gt; Script Console</code></p>
<center>
  <figure>
    <img src="05-script-console.png" alt="A screenshot of the Jenkins UI. It shows the &amp;lsquo;Script Console&amp;rsquo; page which lives under /script by default."  loading="lazy" />
  </figure>
</center><p>Enter the following into the script console: <code>println(hudson.util.Secret.decrypt('&lt;paste hash here&gt;'))</code>. Make sure to include the braces and the single quotes. You should see your credential output as seen below</p>
<center>
  <figure>
    <img src="06-final-result.png" alt="A screenshot of the Jenkins Script Console UI. The user has pasted the copied input from the Firefox browser tools that was open in an earlier screenshot. This input has been wrapped in some Jenkins functions. Below the Script Console is an output area with the actual password of the credential that was previously redacted."  loading="lazy" />
  </figure>
</center><p>It&rsquo;s a pretty handy trick, but quite obviously a borderline exploit at the same time. It&rsquo;s up to you to use it responsibly!</p>

  </div>
</article>

    </div>
    <div id="fullscreen"></div>
  
  
  
  
  
  
  <script defer type="text/javascript" src="/js/footnotes.1be9fd05e6f9672cdc2b4f8c9a16b96016b4941e68d5ebe04a863454f8f64122.js" integrity="sha256-G&#43;n9Beb5ZyzcK0&#43;Mmha5YBa0lB5o1evgSoY0VPj2QSI="></script>

  
  
  
  
  <script defer type="text/javascript" src="/js/image-viewer.90762074c5e8b05c4d401ecb428a34fb7215f4d42d42eb93eff0f6bda5416a6d.js" integrity="sha256-kHYgdMXosFxNQB7LQoo0&#43;3IV9NQtQuuT7/D2vaVBam0="></script>

</body>
</html>

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>utf9k</title>
    <link>https://utf9k.net/tags/staticsites/</link>
    <description>Posts from utf9k</description>
    <language>en</language>
    <author>
      <name>Marcus Crane</name>
      <email>marcus@utf9k.net</email>
    </author>
    <lastBuildDate>Mon, 12 Jul 2021 18:50:00 +1300</lastBuildDate>
    
	<atom:link href="https://utf9k.net/tags/staticsites/rss.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Creating debug reports with Hugo inline shortcodes</title>
      <link>https://utf9k.net/blog/hugo-debug-reports/</link>
      <description>I teach you some tricks on introspecting your Hugo builds</description>
      <pubDate>Mon, 12 Jul 2021 18:50:00 +1300</pubDate>
      <author><name>Marcus Crane</name></author>
      <guid>https://utf9k.net/blog/hugo-debug-reports/</guid>
      <content type="html">&lt;p&gt;Recently I discovered that &lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt; added support for &lt;a href=&#34;https://gohugo.io/templates/shortcode-templates/&#34;&gt;inline shortcodes&lt;/a&gt; like 30 versions ago.&lt;/p&gt;
&lt;p&gt;According to &lt;a href=&#34;https://github.com/bep&#34;&gt;bep&lt;/a&gt;, the reason I had never heard about them was simple:&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-dnt=&#34;true&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;You didn&amp;#39;t ask ... (we added that to get the &lt;a href=&#34;https://twitter.com/getbootstrap?ref_src=twsrc%5Etfw&#34;&gt;@getbootstrap&lt;/a&gt; site on Hugo, they had lots of inline scripting) ...&lt;/p&gt;&amp;mdash; Bj√∏rn Erik Pedersen (@bepsays) &lt;a href=&#34;https://twitter.com/bepsays/status/1408348824083615745?ref_src=twsrc%5Etfw&#34;&gt;June 25, 2021&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;


&lt;h2 id=&#34;a-shortcode-refresher&#34;&gt;A shortcode refresher&lt;/h2&gt;&lt;p&gt;To give an idea of what this means, here&amp;rsquo;s a reminder on how you were required to use shortcodes in the past:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- layouts/shortcodes/notice.html --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;notice&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;h3&lt;/span&gt;&amp;gt;{{ .Get &amp;#34;title&amp;#34; }}&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;h3&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  {{ .Inner }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- content/blog/example-post.md --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# This is an example post
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ notice title=&amp;#34;This is a notice&amp;#34; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;This is the content inside of a notice shortcode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ /notice }}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;sup&gt;Minor caveat with shortcode syntax&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;As you can see, the shortcode internals live in your &lt;code&gt;layouts&lt;/code&gt; folder, and have access to your &lt;code&gt;page&lt;/code&gt; context as well as all of the various Hugo functions. Your post is only able to pass parameters into the shortcode itself.&lt;/p&gt;
&lt;p&gt;Now to be clear, there&amp;rsquo;s absolutely nothing wrong with doing this. In principle, it&amp;rsquo;s a good idea for your content to not have any awareness of how it&amp;rsquo;s being rendered. If you were to change the internals of the notice shortcode once, all of the pages it appears in are instantly updated upon the next render.&lt;/p&gt;
&lt;p&gt;In saying that, the introduction of inline shortcodes allows us to do some fun things:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- content/blog/example-post.md --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# This is an example post
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Check out some of these funny gags I wrote:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ readfile.inline }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;ul&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ range $.Site.Data.gags }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;li&lt;/span&gt;&amp;gt;{{ . }}&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;li&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ end }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;ul&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ /readfile.inline }}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;sup&gt;Minor caveat with shortcode syntax&lt;sup id=&#34;fnref1:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;Don&amp;rsquo;t believe me? Here&amp;rsquo;s that same inline shortcode embedded in this very post:&lt;/p&gt;
&lt;details&gt;
  &lt;summary&gt;Check out these fun gag lines I wrote&lt;/summary&gt;
  
&lt;ul&gt;
  
  &lt;li&gt;Has anyone seen my keys? I dropped them in here somewhere...&lt;/li&gt;
  
  &lt;li&gt;My bluetooth is disabled but I only have bluetooth devices. How do I turn it back on?!&lt;/li&gt;
  
  &lt;li&gt;Is good software a myth? Perhaps we&#39;ll never know&lt;/li&gt;
  
  &lt;li&gt;The IETF announces BNS - Baby Name System&lt;/li&gt;
  
  &lt;li&gt;If text is sublime already, how can there be a sublime text 2?&lt;/li&gt;
  
  &lt;li&gt;Why is it called venture capital if you can just apply for it without walking anywhere?&lt;/li&gt;
  
  &lt;li&gt;What does the Y in YCombinator stand for?&lt;/li&gt;
  
  &lt;li&gt;The invention of sport was a mistake!&lt;/li&gt;
  
  &lt;li&gt;Besides Tele, how many other types of vision are there?&lt;/li&gt;
  
  &lt;li&gt;When are they going to air Who Wants To Be A Crypto Millionaire?&lt;/li&gt;
  
  &lt;li&gt;What if NASA was the result of a typo in a government memo proposing &#34;Spice exploration&#34;?&lt;/li&gt;
  
  &lt;li&gt;What does the &#34;work&#34; in network refer to? There&#39;s no such thing as a netrelax after all&lt;/li&gt;
  
  &lt;li&gt;You have 341 new emails.&lt;/li&gt;
  
  &lt;li&gt;What even is a TPS report?&lt;/li&gt;
  
  &lt;li&gt;Do you think anyone has ever been killed by a judge&#39;s gavel?&lt;/li&gt;
  
  &lt;li&gt;I haven&#39;t used a mailbox in quite a long time!&lt;/li&gt;
  
  &lt;li&gt;Thanks for reading this far! I guess you enjoyed the content, hmm?&lt;/li&gt;
  
  &lt;li&gt;I don&#39;t have any good fuel fun facts. I don&#39;t even drive!&lt;/li&gt;
  
  &lt;li&gt;Did you know solo camping is a thing? I should try it sometime.&lt;/li&gt;
  
  &lt;li&gt;Budgeting is hard. You should try to save a little more for that rainy day!&lt;/li&gt;
  
  &lt;li&gt;I only ever see baths in hotels. What if they end up becoming extinct?!&lt;/li&gt;
  
  &lt;li&gt;An internet connected sandwich maker wouldn&#39;t be so bad, would it?&lt;/li&gt;
  
  &lt;li&gt;Someone who is good at the economy please help me plan my startup runway&lt;/li&gt;
  
  &lt;li&gt;:wq!&lt;/li&gt;
  
  &lt;li&gt;Apparently you&#39;re supposed to feel rested after sleep but I haven&#39;t read the literature myself&lt;/li&gt;
  
  &lt;/ul&gt;
  
&lt;/details&gt;
&lt;p&gt;If any of these look familiar, I just used an inline shortcode to read from the same file that powers the footer.&lt;/p&gt;
&lt;p&gt;I haven&amp;rsquo;t used inline shortcodes to their full potential yet but I&amp;rsquo;d like to use it to add a bit more flavour to posts in future where having a dedicated shortcode would be a bit overkill.&lt;/p&gt;
&lt;p&gt;They&amp;rsquo;ll always have their place of course! Pick the right tool for the job and all that.&lt;/p&gt;
&lt;p&gt;Anyway, that brings me to the actual topic at hand: debug reports.&lt;/p&gt;

&lt;h2 id=&#34;let-hugo-debug-itself-for-you&#34;&gt;Let Hugo debug itself for you&lt;/h2&gt;&lt;p&gt;There are always some unknowns to any site like &amp;ldquo;Do any links throw a 404?&amp;rdquo; or &amp;ldquo;Are there posts without a description?&amp;rdquo; and to shed some light on the current situation, we can get a bit meta.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s easiest if you just check out the &lt;a href=&#34;https://utf9k.net/debug&#34;&gt;debug&lt;/a&gt; section of my site for yourself but the short version is that I&amp;rsquo;ve been using inline shortcodes to write one off custom reports, that effectively answer these questions through introspection. That&amp;rsquo;s just a fancy way of saying I write Hugo content (reports) that show the status of other Hugo content.&lt;/p&gt;
&lt;p&gt;There isn&amp;rsquo;t anything super complex at the moment but I used it to clean up posts where the &lt;a href=&#34;https://utf9k.net/debug/file-url-match/&#34;&gt;folder names didn&amp;rsquo;t match slugs&lt;/a&gt; as an example.&lt;/p&gt;
&lt;p&gt;They automatically update every time the site rebuilds so while I could keep a spreadsheet, this is a nice way of keeping that useful information close to where the action happens.&lt;/p&gt;
&lt;p&gt;I made &lt;a href=&#34;https://utf9k.net/debug/reports-todo/&#34;&gt;a list of various reports&lt;/a&gt; that I&amp;rsquo;ll consider generating going forward and some will be a bit more tricky than others.&lt;/p&gt;
&lt;p&gt;In all likelihood, the most interesting ones will just be reading from data sources generated by external scripts running either locally or via a CI pipeline. It&amp;rsquo;s nicer to see all this information on one place even if I could just read the logs from my terminal or a pipeline run.&lt;/p&gt;
&lt;p&gt;Ah, and before I forget, the actual source for the reports &lt;a href=&#34;https://github.com/marcus-crane/utf9k/tree/main/content/debug&#34;&gt;is visible on Github&lt;/a&gt; so feel free to borrow anything you&amp;rsquo;d like to use for your own site. They&amp;rsquo;re pretty naively written but they get the job done.&lt;/p&gt;
&lt;p&gt;Hopefully I&amp;rsquo;ve given you something to consider and if you think of any interesting report types that aren&amp;rsquo;t on my list, &lt;a href=&#34;mailto:hello@utf9k.net&#34;&gt;I&amp;rsquo;d love to hear about them!&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;The above isn&amp;rsquo;t actual syntax but near enough. If I were to type it properly, the shortcode would really render, whereas I&amp;rsquo;m trying to demonstrate the shortcode internals themselves. To find some real shortcode syntax, check out &lt;a href=&#34;https://gohugo.io/templates/shortcode-templates/&#34;&gt;this&lt;/a&gt; section of the Hugo docs.&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref1:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
    </item>
    
  </channel>
</rss>

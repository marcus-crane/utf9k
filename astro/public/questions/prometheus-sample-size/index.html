<!DOCTYPE html>
<html lang="en">
<head>
  
  
  
  
  <link rel="stylesheet" href="/littlefoot_12488593780039224145.min.54699eaea8856da92132545b99c00faedb4366ab9b50eb1b1e6856689a884ae1.css" integrity="sha256-VGmerqiFbakhMlRbmcAPrttDZqubUOsbHmhWaJqISuE=" />
  

  <title>How large is a single Prometheus sample? | utf9k</title>
<link rel="alternate" type="text/markdown" href="https://utf9k.net/questions/prometheus-sample-size/index.md">
<link rel="alternate" type="text/plain" href="https://utf9k.net/questions/prometheus-sample-size/index.txt">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="theme-color" content="#eaebe3" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#1f2738" media="(prefers-color-scheme: dark)" />
<meta name="author" content="Marcus Crane" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

<meta name="description"
  content="In which I remind myself how to do napkin math for Prometheus" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon.png" sizes="16x16">
<link rel="canonical" href="https://utf9k.net/questions/prometheus-sample-size/" />
<link rel="apple-touch-icon" href="/favicon.png">
<link rel="me" href="mailto:hello@utf9k.net" />
<link rel="me" href="https://mastodon.nz/@utf9k" />
<link rel="me" href="https://twitter.com/sentreh" />
<link rel="me" href="https://github.com/marcus-crane" />
<link rel="webmention" href="https://webmention.io/utf9k.net/webmention" />
<link rel="pingback" href="https://webmention.io/utf9k.net/xmlrpc" />
<meta property="og:title" content="How large is a single Prometheus sample?" />
<meta property="og:description" content="In which I remind myself how to do napkin math for Prometheus" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://utf9k.net/questions/prometheus-sample-size/" /><meta property="og:image" content="https://utf9k.net/favicon.png"/><meta property="article:section" content="questions" />

<meta property="article:modified_time" content="2023-01-03T12:56:46+13:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://utf9k.net/favicon.png"/>

<meta name="twitter:title" content="How large is a single Prometheus sample?"/>
<meta name="twitter:description" content="In which I remind myself how to do napkin math for Prometheus"/>
<meta name="twitter:site" content="@sentreh"/>






<link rel="stylesheet" href="/css/style.min.f927dcb0e4d3990cada1be73573ac4f5fa673a75c7e0fc28d4a7ee01400aeaaf.css" integrity="sha256-+SfcsOTTmQytob5zVzrE9fpnOnXH4Pwo1KfuAUAK6q8=" />

  
</head>
<body>
  
    <header class="navigation">
  <a href="/" id="logo">
    <img src="/favicon.png" alt="utf9k" width="16px" height="16px">
    <span>utf9k</span>
  </a>
  <nav>
    
    
    <li><a href="/blog/">Blog</a></li>
    <span>//</span>
    
    <li><a href="/projects/">Projects</a></li>
    <span>//</span>
    
    <li><a href="/about/">About</a></li>
    <span>//</span>
    
    <li><a href="/questions/">Questions</a></li>
    <span>//</span>
    
    <li><a href="/rss.xml">RSS</a></li>
    
    
  </nav>
</header>
    <div id="content">
    
<article>
  <header>
    <h1>How large is a single Prometheus sample?</h1>
  </header>
  <div id="post-body">
    


    <p>According to the <a href="https://prometheus.io/docs/prometheus/latest/storage/#operational-aspects">Storage</a> part of the Prometheus documentation, a single sample is somewhere between 1 - 2 bytes.</p>
<p>You can roughly calculate how much storage you&rsquo;ll need with the following formulae:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>disk_space = retention_time_in_seconds * samples_ingested_per_second * 2 bytes (take the upper to be safe)
</span></span></code></pre></div><p>By that logic, if we were ingesting 4000 samples per second and we were retaining them for 15 days (the default), it would look something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>disk_space = 1296000 * 4000 * 2
</span></span><span style="display:flex;"><span>disk_space // 10368000000 bytes
</span></span><span style="display:flex;"><span>disk_space in gigabytes // 10.37 gigabytes
</span></span></code></pre></div><p>Given this, you can see the levers you have are decreasing the amount of sampling going on, reducing the amount of time samples are retained for or simply buying more disk space as you go on.</p>
<p>Remember as well that we took the high end of the estimation and it could be as low as 5.185 if we&rsquo;re extremely lucky on compression and/or presumably we have next to no labels on each sample.</p>
<p>You would also need to factor in many other things such as the <a href="https://www.robustperception.io/how-much-space-does-the-wal-take-up">write-ahead log</a> but I don&rsquo;t pretend to know what any of these things are.</p>
<p>I just use Prometheus! I don&rsquo;t actually maintain a cluster or anything like that.</p>

  </div>
</article>

    </div>
    <div id="fullscreen"></div>
  
  
  
  
  
  
  <script defer type="text/javascript" src="/js/footnotes.1be9fd05e6f9672cdc2b4f8c9a16b96016b4941e68d5ebe04a863454f8f64122.js" integrity="sha256-G&#43;n9Beb5ZyzcK0&#43;Mmha5YBa0lB5o1evgSoY0VPj2QSI="></script>

  
  
  
  
  <script defer type="text/javascript" src="/js/image-viewer.90762074c5e8b05c4d401ecb428a34fb7215f4d42d42eb93eff0f6bda5416a6d.js" integrity="sha256-kHYgdMXosFxNQB7LQoo0&#43;3IV9NQtQuuT7/D2vaVBam0="></script>

</body>
</html>

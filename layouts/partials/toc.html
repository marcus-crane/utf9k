{{ $headerCount := .TableOfContents | strings.Count "<li>" }}
{{ if and (gt $headerCount 5) }}
<details>
  <summary>Table of contents</summary>
  {{ .TableOfContents }}
</details>
{{ end }}
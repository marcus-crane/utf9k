<!DOCTYPE html>
<html><head><meta property="og:type" content="website">
<meta property="og:url" content="http://localhost:3000/blog/-fastmail-caldav/">
<meta name="twitter:card" content="summary">
</head><body><p>I've been a subscriber to <a href="https://fastmail.com">Fastmail</a> now for probably a good five years at least, if not more at this point.</p>
<p>It's a really nice service, not just for email but also email and contact hosting and for most clients, it all basically works out of the box as you might hope.</p>
<p>A number of services that integration with calendars tend to only offer <a href="https://en.wikipedia.org/wiki/Google_Calendar">Google Calendar</a> integration but thankfully CalDAV integration pops up from time to time.</p>
<p>One thing that I think can be a little bit confusing for people is the Fastmail documentation.</p>
<p>If we visit the <a href="https://www.fastmail.help/hc/en-us/articles/1500000278342-Server-names-and-ports#calendar">Server names and ports</a> page, it mentions <code>https://caldav.fastmail.com/</code> as the default server for clients with auto-discovery with <a href="https://www.fastmail.help/hc/en-us/articles/360058752834">a support page</a> for other clients.</p>
<p>That's perfectly correct but a number of CalDAV libraries I've seen around the place tend to complain about that base URL.</p>
<p>Most recently, I ran into this with <a href="https://github.com/davish/obsidian-full-calendar/issues/87">obsidian-full-calendar</a> where Fastmail integration was considered not working but really, the wrong server name was being used.</p>
<p>If <code>https://caldav.fastmail.com/</code> doesn't work, odds are you'll get what you're after by using the following server name:</p>
<pre><code class="language-text hljs language-plaintext">https://caldav.fastmail.com/dav/principals/user/user@example.com/
</code></pre>
<p><em><strong>user@example.com</strong> is the email address that you use for Fastmail.</em></p>
<p>You can confirm that by navigating to your Fastmail inbox and seeing what address in the top left corner if you really need to.</p>
<p>Alternatively, you could also navigate to <code>Settings</code> → <code>Calendars</code> → <code>Export</code> (on one of the calendars) and copy most of the section from <code>CalDAV URL</code>.</p>
<p><img src="calendar-settings.png" alt="A screenshot of the author's Fastmail account, showing the Settings page. The Calendars tab is highlighted in the left sidebar. Three calendars are visible in the background with a modal open in the foreground. The modal has two sections: One deals with exporting a calendar. The other has a text box with the CalDAV URL for the selected calendar. An arrow is pointing to the text box. The contents of the textbox is highlighted up to the end of the segment containing the author's email. The ID at the end is not selected although this is not visible as it is blurred out."></p>
<p>Putting the whole URL will only load one calendar but odds are, whatever CalDAV client you're struggling with will load all of your calendars by removing the calendar ID at the end.</p>
<p>Why does this work exactly? Well, I'm no expert here but I gave a brief overview of my understanding by way of <a href="https://github.com/davish/obsidian-full-calendar/pull/106#issuecomment-1120536933">this Github comment</a>.</p>
<p>For completeness, I've quoted it verbatim:</p>
<blockquote>
<p>For anyone interested, Fastmail uses <a href="https://www.cyrusimap.org/">Cyrus IMAP</a> which is an all-in-one IMAP, CalDAV and CardDAV server. As I understand it, it <a href="https://www.cyrusimap.org/imap/concepts/features/dav-collection-mgmt.html">represents calendars as mailboxes under the hood</a> hence why you use your Fastmail address as the identifier. That is, you have a single "calendar" in the UI but you can have multiple calendars on it eg; one for Events, one for Work and so on.</p>
<p>In fact, we can prove this by requesting a bogus calendar:</p>
</blockquote>
<pre><code class="language-shell hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash">curl -u &lt;fastmail-email&gt;:&lt;fastmail-app-password&gt; https://caldav.fastmail.com/dav/calendars/user/&lt;fastmail-email&gt;/blah</span>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;404 Not Found&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Not Found&lt;/h1&gt;
    &lt;p&gt;Mailbox does not exist&lt;/p&gt;
    &lt;hr&gt;
    &lt;address&gt;Cyrus-HTTP/3.7.0-alpha0-591-gfe6c3a2700-fm-20220427.001-gfe6c3a27 Cyrus-SASL/2.1.27 Lib/XML2.9.10 Jansson/2.13.1 OpenSSL/1.1.1n Wslay/1.1.1 Zlib/1.2.11 Brotli/1.0.9 Xapian/1.5.0 LibiCal/3.0 ICU4C/69.1 SQLite/3.34.1 Server at caldav.fastmail.com Port 2075&lt;/address&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><em>Note how it is looking for a mailbox despite being a caldav server</em></p>
<blockquote>
<p>So yeah, your calendars are just email inboxes under the hood with Fastmail!</p>
<p>More specifically, there is a mailbox per calendar (I think) and that mailbox is full of <a href="https://en.wikipedia.org/wiki/ICalendar">ics</a> files</p>
</blockquote>
</body></html>